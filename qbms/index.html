<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Question Manager</title>
<link rel="stylesheet" href="style.css">
<script type="module" src="./js/config.js"></script>
<script type="module" src="./js/notification.js"></script>
<script type="module" src="./js/modal.js"></script>
<script type="module" src="./js/questions.js"></script>
<script type="module" src="./js/pagination.js"></script>
<script type="module" src="./js/bulk-upload.js"></script>
</head>
<body>

<!-- Sidebar -->
<aside class="sidebar">
  <div id="hamburger-icon" class="hamburger">
    <span></span>
    <span></span>
    <span></span>
  </div>
  <nav class="nav">
    <h3>Tests</h3>
    <a href="#" class="active"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/></svg><span>Questions</span></a>
    <a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg><span>Test Series</span></a>
    <a href="live-tests.html"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg><span>Live Tests & Quizzes</span></a>
    <a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6"/><path d="M10 12H8"/><path d="M16 12H12"/><path d="M16 16H8"/></svg><span>Previous Year Papers</span></a>
    <a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h.01"/><path d="M18 20h.01"/><path d="M6 20h.01"/><path d="M12 14h.01"/><path d="M18 14h.01"/><path d="M6 14h.01"/><path d="M12 8h.01"/><path d="M18 8h.01"/><path d="M6 8h.01"/></svg><span>Practice</span></a>
    <a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><path d="M12 6v6l4 2"/></svg><span>Free Quizzes</span></a>
  </nav>
  <nav class="nav">
    <h3>Activity</h3>
    <a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg><span>Attempted Tests</span></a>
    <a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"/></svg><span>Saved Questions</span></a>
    <a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg><span>Reported Questions</span></a>
  </nav>
  <nav class="nav">
    <h3>Learn</h3>
    <a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 18a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v13z"/><line x1="12" y1="18" x2="12" y2="18"/></svg><span>Live Classes</span></a>

  </nav>
</aside>

<!-- Main -->
<main class="main">
  <header class="topbar">
    <h1>Questions</h1>
    <div class="actions">
      <div id="applied-filters" class="applied-filters"></div>
      <div class="search-container">
        <div id="filter-pills-container"></div>
        <input id="searchInput" type="text" placeholder="🔍 Search Question…" />
        <select id="filterTypeDropdown">
          <option value="">Filter by</option>
          <option value="year">Year</option>
          <option value="subject">Subject</option>
          <option value="course">Course</option>
          <option value="program">Program</option>
          <option value="difficulty">Difficulty</option>
        </select>
        <div id="filterOptionsContainer" class="dropdown" style="display: none;">
          <select id="filterOptionsDropdown" multiple></select>
          <button id="apply-filters-btn" class="btn btn-primary apply-filter-button">Apply</button>
        </div>
      </div>
      <button id="create-quiz-btn" class="btn">Create Quiz</button>
      <button id="exportBtn" class="btn">⬇ Export CSV</button>
      <div class="dropdown-container">
        <button id="moreActionsBtn" class="btn ellipsis-btn">⋮</button>
        <div id="moreActionsDropdown" class="dropdown">
          <button id="addQuestionBtn" class="btn">Add Question</button>
          <button id="bulkUploadBtn" class="btn">Bulk Upload</button>
          <button id="deleteSelectedBtn" class="btn">Delete Selected</button>
        </div>
      </div>
    </div>
  </header>



  <!-- Table -->
  <section class="card">
    <div id="loading" class="loading">Loading…</div>
    <div id="emptyState" class="empty">No questions found.</div>
    <div class="table-wrap">
      <table class="table">
        <thead>
          <tr>
            <th><input type="checkbox" id="selectAll" /></th>
            <th>Question</th>
            <th>Option A</th>
            <th>Option B</th>
            <th>Option C</th>
            <th>Option D</th>
            <th>Answer</th>
            <th>Subject</th>
            <th>Course</th>
            <th>Program</th>
            <th>Difficulty</th>
            <th>Year</th>
            <th style="width:44px;">Actions</th>
          </tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>
    </div>
  </section>
</main>

<!-- Add/Edit Question Modal -->
<div id="modal" class="modal">
  <div class="modal-content">
    <h2 id="modalTitle">Add Question</h2>
    <form id="questionForm" class="form-grid">
      <div class="form-row full-width">
        <label>Question Text</label>
        <textarea id="q_text" rows="3" required></textarea>
      </div>
      <div class="form-row">
        <label>Option A</label>
        <input type="text" id="q_opt_a" required />
      </div>
      <div class="form-row">
        <label>Option B</label>
        <input type="text" id="q_opt_b" required />
      </div>
      <div class="form-row">
        <label>Option C</label>
        <input type="text" id="q_opt_c" required />
      </div>
      <div class="form-row">
        <label>Option D</label>
        <input type="text" id="q_opt_d" required />
      </div>
      <div class="form-row">
        <label>Correct Answer</label>
        <select id="q_answer" required>
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
          <option value="D">D</option>
        </select>
      </div>
      <div class="form-row">
        <label>Difficulty Level</label>
        <select id="q_diff">
          <option>Easy</option>
          <option>Medium</option>
          <option>Hard</option>
        </select>
      </div>
      <div class="form-row">
        <label>Program Name</label>
        <input type="text" id="q_program" required />
      </div>
      <div class="form-row">
        <label>Subject</label>
        <input type="text" id="q_subject" required />
      </div>
      <div class="form-row">
        <label>Course</label>
        <input type="text" id="q_course" required />
      </div>
      <div class="form-row">
        <label>Year</label>
        <input type="number" id="q_year" required />
      </div>
      <div class="modal-actions">
        <button type="submit" class="btn btn-primary">Save</button>
        <button type="button" id="closeModal" class="btn">Cancel</button>
      </div>
    </form>
  </div>
</div>


<!-- Notifications -->
<div id="toasts"></div>

<!-- Initialize Pagination -->
<script type="module">
import { initPagination } from "./js/pagination.js";
initPagination();
</script>

<script type="module" src="./js/success-modal.js"></script>

<!-- Success Modal -->
<div id="successModal" class="modal">
  <div class="success-modal-content">
    <div class="success-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
    </div>
    <p id="successMessage">Successfully saved!</p>
  </div>
</div>

<!-- Bulk Upload Modal -->
<div id="bulkUploadModal" class="modal">
  <div class="modal-content">
    <h2>Bulk Upload Questions</h2>
    <section class="card">
      <!-- Download Template -->
      <div class="form-row">
        <label>Download CSV Template</label>
        <button id="downloadTemplateBtn" class="btn btn-primary">Download Template</button>
      </div>

      <!-- Upload CSV -->
      <div class="form-row upload-section">
        <input type="file" id="csvFileInput" accept=".csv">
        <button id="uploadCsvBtn" class="btn btn-primary">Upload CSV</button>
      </div>

      <!-- Status -->
      <div id="uploadStatus"></div>
    </section>
    <div class="modal-actions">
      <button type="button" id="closeBulkUploadModal" class="btn">Close</button>
    </div>
  </div>
</div>

<!-- Create Quiz Modal -->
<div id="createQuizModal" class="modal">
  <div class="modal-content">
    <h2>Create Quiz</h2>
    <form id="createQuizForm" class="form-grid">
      <div class="form-row">
        <label>Quiz Title</label>
        <input type="text" id="quiz-title" required />
      </div>
      <div class="form-row">
        <label>Total Marks (Auto-calculated)</label>
        <input type="number" id="quiz-total-marks" readonly />
      </div>
      <div class="form-row">
        <label>No. of Questions</label>
        <input type="number" id="quiz-num-questions" readonly />
      </div>
      <div class="form-row">
        <label>Points per Question</label>
        <input type="number" id="quiz-points-per-question" required value="1" />
      </div>
      <div class="form-row">
        <label>Quiz Duration (minutes)</label>
        <input type="number" id="quiz-duration" required />
      </div>
      <div class="form-row">
        <label>Start Date/Time</label>
        <input type="datetime-local" id="quiz-start-date" required />
      </div>
      <div class="form-row">
        <label>End Date/Time</label>
        <input type="datetime-local" id="quiz-end-date" required />
      </div>
      <div class="form-row">
        <label>Quiz Status</label>
        <select id="quiz-status" required>
          <option value="draft">Draft</option>
          <option value="published">Published</option>
        </select>
      </div>
      <div class="modal-actions">
        <button type="submit" class="btn btn-primary">Create</button>
        <button type="button" id="closeCreateQuizModal" class="btn">Cancel</button>
      </div>
    </form>
  </div>
</div>

</body>
</html>
